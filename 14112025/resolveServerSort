const resolveServerSort = (key: string): { sort: string; phase: string } => {
    const nameFilterActive = !!(filterProps.assetNameKey || '').trim();

    const approvalSelected =
        (((filterProps as any).approvalStatuses || filterProps.applovalStatues) || []).length > 0;

    const workSelected =
        (((filterProps as any).workStatuses || filterProps.workStatues) || []).length > 0;

    const isFilterActive = nameFilterActive || approvalSelected || workSelected;

    if (key === 'group_1') return { sort: 'group_1', phase: 'none' };
    if (key === 'relation') return { sort: 'relation', phase: 'none' };

    const m = key.match(/^(mdl|rig|bld|dsn|ldv)_(work|appr|submitted)$/i);
    if (!m) return { sort: 'group_1', phase: 'none' };

    const phase = m[1].toLowerCase();
    const field = m[2].toLowerCase();

    // ⭐ Correct behavior:
    // If filters are active → ALWAYS phase=none
    // If no filters → use the phase for sorting priority
    const resolvedPhase = isFilterActive ? "none" : phase;

    if (field === 'submitted') return { sort: `${phase}_submitted`, phase: resolvedPhase };
    if (field === 'appr')      return { sort: `${phase}_appr`,      phase: resolvedPhase };
    return { sort: `${phase}_work`, phase: resolvedPhase };
};
