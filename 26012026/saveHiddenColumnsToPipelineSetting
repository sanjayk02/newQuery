/**
 * Saves the set of hidden columns to the pipeline settings on the server for the current project.
 */
const saveHiddenColumnsToPipelineSetting = async (cols: Set<string>) => {
  try {
    if (!currentProject || !currentProject.key_name) return;
    
    console.log('Attempting to save hidden columns to pipeline settings...');
    console.log('Project:', currentProject.key_name);
    console.log('Key:', PIPE_KEY);
    console.log('Value:', Array.from(cols));
    
    // Use updateValue to save the configuration
    // queryConfig is only for reading, not writing
    const { updateValue } = await import('../../../new-pipeline-setting/api');
    
    await updateValue(
      PIPE_KEY, // key
      JSON.stringify(Array.from(cols)), // value
      'config', // group
      'project', // section
      currentProject.key_name, // entry (project name)
    );
    
    console.log('Pipeline settings save successful');
  } catch (e) {
    console.warn('PipelineSetting save failed; using local only', e);
    // Don't re-throw - we'll use localStorage as fallback
  }
};
