const filteredGroups = useMemo(() => {
  const list = groups || [];

  // ✅ NO selection → show EVERYTHING
  if (selectedTopGroups.length === 0) {
    return list;
  }

  // ✅ At least one checked → show ONLY checked
  const allowed = new Set(
    selectedTopGroups.map(g => g.toLowerCase())
  );

  return list.filter((g: any) =>
    allowed.has(String(g.top_group_node || "").toLowerCase())
  );
}, [groups, selectedTopGroups]);


const isChecked = selectedTopGroups.includes(name);

<Checkbox checked={isChecked} />

<MenuItem
  key={name}
  onClick={() => {
    setSelectedTopGroups(prev =>
      prev.includes(name)
        ? prev.filter(n => n !== name)
        : [...prev, name]
    );
  }}
>
