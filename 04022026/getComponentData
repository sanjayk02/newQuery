const getComponentData = () => {
  // Check if component exists directly on the asset (from the API response)
  if (asset.component && !isEmptyValue(asset.component)) {
    const componentStr = String(asset.component).trim();
    // Clean underscores first, then format
    const cleanComponent = componentStr.replace(/^_+|_+$/g, '');
    return formatForDisplay(cleanComponent);
  }
  
  // Fallback to latestComponents if needed (for backward compatibility)
  const assetKey = `${asset.root}-${asset.relation}`;
  const component = latestComponents[assetKey];

  if (!component || component.length === 0) {
    return '—';
  }

  const componentNames = component.map(comp => {
    const compStr = String(comp.component).trim();
    const cleanComp = compStr.replace(/^_+|_+$/g, '');
    return formatForDisplay(cleanComp);
  }).filter(name => name !== '—'); // Remove empty display values
  
  return componentNames.join(', ') || '—';
};
