router.GET("/api/projects/:project/reviews/assets/pivot2", func(c *gin.Context) {

	project := strings.TrimSpace(c.Param("project"))
	if project == "" {
		c.JSON(http.StatusBadRequest, gin.H{"error": "project required"})
		return
	}

	root := c.DefaultQuery("root", "assets")

	page := mustAtoi(c.DefaultQuery("page", "1"))
	if page < 1 {
		page = 1
	}
	perPage := clampPerPage(mustAtoi(c.DefaultQuery("per_page", "15")))
	offset := (page - 1) * perPage

	ctx, cancel := context.WithTimeout(c.Request.Context(), 5*time.Second)
	defer cancel()

	assets, total, err := reviewInfoRepository.ListAssetsPivot2(
		ctx,
		project,
		root,
		perPage,
		offset,
	)
	if err != nil {
		log.Println("pivot2 error:", err)
		c.JSON(http.StatusInternalServerError, gin.H{"error": "db error"})
		return
	}

	c.JSON(http.StatusOK, gin.H{
		"assets":   assets,
		"total":    total,
		"page":     page,
		"per_page": perPage,
		"view":     "pivot2",
	})
})
